<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="832px" preserveAspectRatio="none" style="width:1519px;height:832px;" version="1.1" viewBox="0 0 1519 832" width="1519px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="204" x="658.25" y="23.5352">ComponentManager::Disable</text><rect fill="#FFFFFF" height="645.166" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="115.5" y="112.4648"/><rect fill="#FFFFFF" height="29.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="120.5" y="316.3281"/><rect fill="#FFFFFF" height="14.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="120.5" y="487.1914"/><rect fill="#FFFFFF" height="29.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="120.5" y="604.0781"/><rect fill="#FFFFFF" height="586.5449" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="454.5" y="141.7754"/><rect fill="#FFFFFF" height="14.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="594.5" y="171.0859"/><rect fill="#FFFFFF" height="14.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="594.5" y="214.3965"/><rect fill="#FFFFFF" height="29.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="736.5" y="428.5703"/><rect fill="#FFFFFF" height="29.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="902.5" y="257.707"/><rect fill="#FFFFFF" height="29.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1121.5" y="662.6992"/><rect fill="#FFFFFF" height="339.3711" style="stroke: #000000; stroke-width: 1.0;" width="1494.5" x="13" y="360.9492"/><rect fill="#FFFFFF" height="132.1973" style="stroke: none; stroke-width: 1.0;" width="1494.5" x="13" y="568.123"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="120" x2="120" y1="81.4648" y2="775.9414"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="459.5" x2="459.5" y1="81.4648" y2="775.9414"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="599.5" x2="599.5" y1="81.4648" y2="775.9414"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="741.5" x2="741.5" y1="81.4648" y2="775.9414"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="907.5" x2="907.5" y1="81.4648" y2="775.9414"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1126.5" x2="1126.5" y1="81.4648" y2="775.9414"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1381.5" x2="1381.5" y1="81.4648" y2="775.9414"/><rect fill="#FEFECE" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="155" x="43" y="49.9766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="141" x="50" y="70.5117">ComponentManager</text><rect fill="#FEFECE" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="155" x="43" y="774.9414"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="141" x="50" y="795.4766">ComponentManager</text><rect fill="#FEFECE" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="110" x="404.5" y="49.9766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="96" x="411.5" y="70.5117">Enabled_State</text><rect fill="#FEFECE" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="110" x="404.5" y="774.9414"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="96" x="411.5" y="795.4766">Enabled_State</text><rect fill="#FEFECE" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="70" x="564.5" y="49.9766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="56" x="571.5" y="70.5117">promise</text><rect fill="#FEFECE" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="70" x="564.5" y="774.9414"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="56" x="571.5" y="795.4766">promise</text><rect fill="#FEFECE" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="114" x="684.5" y="49.9766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="100" x="691.5" y="70.5117">Disabled_State</text><rect fill="#FEFECE" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="114" x="684.5" y="774.9414"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="100" x="691.5" y="795.4766">Disabled_State</text><rect fill="#FEFECE" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="118" x="848.5" y="49.9766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="104" x="855.5" y="70.5117">TransitionState</text><rect fill="#FEFECE" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="118" x="848.5" y="774.9414"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="104" x="855.5" y="795.4766">TransitionState</text><rect fill="#FEFECE" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="220" x="1016.5" y="33.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="206" x="1023.5" y="54.0234">ComponentManagerBaseState</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="65" x="1094" y="70.5117">{abstract}</text><rect fill="#FEFECE" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="220" x="1016.5" y="774.9414"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="206" x="1023.5" y="795.4766">ComponentManagerBaseState</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="65" x="1094" y="811.9648">{abstract}</text><rect fill="#99FF99" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="191" x="1286.5" y="49.9766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="177" x="1293.5" y="70.5117">ComponentConfiguration</text><rect fill="#99FF99" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="191" x="1286.5" y="774.9414"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="177" x="1293.5" y="795.4766">ComponentConfiguration</text><rect fill="#FFFFFF" height="645.166" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="115.5" y="112.4648"/><rect fill="#FFFFFF" height="29.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="120.5" y="316.3281"/><rect fill="#FFFFFF" height="14.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="120.5" y="487.1914"/><rect fill="#FFFFFF" height="29.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="120.5" y="604.0781"/><rect fill="#FFFFFF" height="586.5449" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="454.5" y="141.7754"/><rect fill="#FFFFFF" height="14.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="594.5" y="171.0859"/><rect fill="#FFFFFF" height="14.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="594.5" y="214.3965"/><rect fill="#FFFFFF" height="29.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="736.5" y="428.5703"/><rect fill="#FFFFFF" height="29.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="902.5" y="257.707"/><rect fill="#FFFFFF" height="29.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1121.5" y="662.6992"/><polygon fill="#A80036" points="103.5,108.4648,113.5,112.4648,103.5,116.4648,107.5,112.4648" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="3" x2="109.5" y1="112.4648" y2="112.4648"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="47" x="10" y="108.0332">Disable</text><polygon fill="#A80036" points="442.5,137.7754,452.5,141.7754,442.5,145.7754,446.5,141.7754" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="125.5" x2="448.5" y1="141.7754" y2="141.7754"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="132.5" y="137.3438">Disable(this)</text><polygon fill="#A80036" points="582.5,167.0859,592.5,171.0859,582.5,175.0859,586.5,171.0859" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="464.5" x2="588.5" y1="171.0859" y2="171.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="40" x="471.5" y="166.6543">Create</text><polygon fill="#A80036" points="475.5,181.3965,465.5,185.3965,475.5,189.3965,471.5,185.3965" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="469.5" x2="598.5" y1="185.3965" y2="185.3965"/><polygon fill="#A80036" points="582.5,210.3965,592.5,214.3965,582.5,218.3965,586.5,214.3965" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="464.5" x2="588.5" y1="214.3965" y2="214.3965"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="65" x="471.5" y="209.9648">get_future</text><polygon fill="#A80036" points="475.5,224.707,465.5,228.707,475.5,232.707,471.5,228.707" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="469.5" x2="598.5" y1="228.707" y2="228.707"/><polygon fill="#A80036" points="890.5,253.707,900.5,257.707,890.5,261.707,894.5,257.707" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="464.5" x2="896.5" y1="257.707" y2="257.707"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="86" x="471.5" y="253.2754">Create(future)</text><polygon fill="#A80036" points="475.5,283.0176,465.5,287.0176,475.5,291.0176,471.5,287.0176" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="469.5" x2="906.5" y1="287.0176" y2="287.0176"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="92" x="481.5" y="282.5859">transitionState</text><polygon fill="#A80036" points="141.5,312.3281,131.5,316.3281,141.5,320.3281,137.5,316.3281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="135.5" x2="453.5" y1="316.3281" y2="316.3281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="241" x="147.5" y="311.8965">CompareAndSwap(this,transitionState)</text><polygon fill="#A80036" points="442.5,341.6387,452.5,345.6387,442.5,349.6387,446.5,345.6387" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="125.5" x2="448.5" y1="345.6387" y2="345.6387"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="132.5" y="341.207">success/failure</text><rect fill="none" height="339.3711" style="stroke: #000000; stroke-width: 1.0;" width="1494.5" x="13" y="360.9492"/><polygon fill="#EEEEEE" points="13,360.9492,75,360.9492,75,367.9492,65,377.9492,13,377.9492,13,360.9492" style="stroke: #000000; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="28" y="374.5176">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="91" x="90" y="373.584">[swap suceeded]</text><polygon fill="#0000FF" points="1370,395.2598,1380,399.2598,1370,403.2598,1374,399.2598" style="stroke: #0000FF; stroke-width: 1.0;"/><line style="stroke: #0000FF; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="464.5" x2="1376" y1="399.2598" y2="399.2598"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="90" x="471.5" y="394.8281">Delete {Async}</text><polygon fill="#A80036" points="724.5,424.5703,734.5,428.5703,724.5,432.5703,728.5,428.5703" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="464.5" x2="730.5" y1="428.5703" y2="428.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="86" x="471.5" y="424.1387">Create(future)</text><polygon fill="#A80036" points="475.5,453.8809,465.5,457.8809,475.5,461.8809,471.5,457.8809" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="469.5" x2="740.5" y1="457.8809" y2="457.8809"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="84" x="481.5" y="453.4492">disabledState</text><polygon fill="#A80036" points="141.5,483.1914,131.5,487.1914,141.5,491.1914,137.5,487.1914" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="135.5" x2="453.5" y1="487.1914" y2="487.1914"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="305" x="147.5" y="482.7598">CompareAndSwap(transitionState, disabledState)</text><polygon fill="#A80036" points="442.5,497.502,452.5,501.502,442.5,505.502,446.5,501.502" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="125.5" x2="448.5" y1="501.502" y2="501.502"/><polygon fill="#A80036" points="587.5,526.502,597.5,530.502,587.5,534.502,591.5,530.502" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="464.5" x2="593.5" y1="530.502" y2="530.502"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="59" x="471.5" y="526.0703">set_value</text><polygon fill="#A80036" points="136.5,555.8125,126.5,559.8125,136.5,563.8125,132.5,559.8125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="130.5" x2="453.5" y1="559.8125" y2="559.8125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="87" x="142.5" y="555.3809">shared_future</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="13" x2="1507.5" y1="569.123" y2="569.123"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="250" x="18" y="579.7578">[this object is not the current state anymore]</text><polygon fill="#A80036" points="141.5,600.0781,131.5,604.0781,141.5,608.0781,137.5,604.0781" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="135.5" x2="453.5" y1="604.0781" y2="604.0781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="147.5" y="599.6465">GetState</text><polygon fill="#A80036" points="442.5,629.3887,452.5,633.3887,442.5,637.3887,446.5,633.3887" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="125.5" x2="448.5" y1="633.3887" y2="633.3887"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="80" x="132.5" y="628.957">current state</text><polygon fill="#A80036" points="1109.5,658.6992,1119.5,662.6992,1109.5,666.6992,1113.5,662.6992" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="464.5" x2="1115.5" y1="662.6992" y2="662.6992"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="471.5" y="658.2676">Disable(manager)</text><polygon fill="#A80036" points="475.5,688.0098,465.5,692.0098,475.5,696.0098,471.5,692.0098" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="469.5" x2="1125.5" y1="692.0098" y2="692.0098"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="87" x="481.5" y="687.5781">shared_future</text><polygon fill="#A80036" points="136.5,724.3203,126.5,728.3203,136.5,732.3203,132.5,728.3203" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="130.5" x2="458.5" y1="728.3203" y2="728.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="87" x="142.5" y="723.8887">shared_future</text><polygon fill="#A80036" points="14,753.6309,4,757.6309,14,761.6309,10,757.6309" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="8" x2="119.5" y1="757.6309" y2="757.6309"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="87" x="20" y="753.1992">shared_future</text><!--
@startuml
title ComponentManager::Disable
skinparam ParticipantPadding 20
skinparam BoxPadding 10
skinparam shadowing false
skinparam sequenceGroupBorderThickness 1
participant ComponentManager
participant Enabled_State
participant promise
participant Disabled_State
participant TransitionState
participant "ComponentManagerBaseState\n{abstract}" as ComponentManagerBaseState
participant ComponentConfiguration #99FF99
[-> ComponentManager:Disable
activate ComponentManager
ComponentManager->Enabled_State:Disable(this)
activate Enabled_State
Enabled_State -> promise: Create
activate promise
promise ->Enabled_State:
deactivate promise
Enabled_State -> promise: get_future
activate promise
promise ->Enabled_State:
deactivate promise
Enabled_State->TransitionState:Create(future)
activate TransitionState
TransitionState - ->Enabled_State: transitionState
deactivate TransitionState
Enabled_State->ComponentManager:CompareAndSwap(this,transitionState)
activate ComponentManager
ComponentManager- ->Enabled_State: success/failure
deactivate ComponentManager
alt swap suceeded
Enabled_State-[#0000FF]->ComponentConfiguration:Delete {Async}
Enabled_State->Disabled_State: Create(future)
activate Disabled_State
Disabled_State- ->Enabled_State: disabledState
deactivate Disabled_State
Enabled_State->ComponentManager:CompareAndSwap(transitionState, disabledState)
activate ComponentManager
ComponentManager- ->Enabled_State:
deactivate ComponentManager
Enabled_State->promise:set_value
Enabled_State- ->ComponentManager: shared_future
else this object is not the current state anymore
Enabled_State->ComponentManager:GetState
activate ComponentManager
ComponentManager- ->Enabled_State: current state
deactivate ComponentManager
Enabled_State->ComponentManagerBaseState: Disable(manager)
activate ComponentManagerBaseState
ComponentManagerBaseState->Enabled_State: shared_future
deactivate ComponentManagerBaseState
end
Enabled_State- ->ComponentManager:shared_future
deactivate Enabled_State
[<- - ComponentManager: shared_future
deactivate ComponentManager
@enduml

PlantUML version 1.2017.20(Mon Dec 11 11:57:05 EST 2017)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_151-b12
Operating System: Mac OS X
OS Version: 10.12.6
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>